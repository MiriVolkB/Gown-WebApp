generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url        = "postgres://postgres.qpilhhrdijebwcpovabs:RachelliGowns25@aws-1-ap-southeast-2.pooler.supabase.com:6543/postgres"
  directUrl = "postgresql://postgres:RachelliGowns25@db.qpilhhrdijebwcpovabs.supabase.co:5432/postgres"
}

model Client {
  id            Int             @id @default(autoincrement())
  name          String
  email         String?
  phone         String
  WeddingDate   DateTime?
  Recommended   String?
  fabricType   String?
  price        Float?    
  dueDate      DateTime?  @map("needGownBy")
  notes         String?
  measurements  Measurement[]
  appointments  Appointment[]
  createdAt     DateTime        @default(now())
}

model Measurement {
  id        Int      @id @default(autoincrement())
  clientId  Int
  date      DateTime @default(now())
  Bust      Float
  waist     Float
  Hips     Float
  ShirtLength     Float
  SkirtLength     Float
  SleeveLength     Float
  SleeveWidth     Float
  ShoulderToBust   Float
  notes     String?
  client    Client   @relation(fields: [clientId], references: [id])
}

model Appointment {
  id              Int        @id @default(autoincrement())
  clientId        Int
  client          Client     @relation(fields: [clientId], references: [id])
  serviceId       Int
  service         Service    @relation(fields: [serviceId], references: [id])
  start           DateTime   // start date + time
  end             DateTime   // end date + time
  durationMinutes Int        // store actual duration, default from service but editable
  status          String     @default("SCHEDULED") 
  date            DateTime
  notes           String?
  createdAt       DateTime   @default(now())
  updatedAt       DateTime   @updatedAt
}

model Service {
  id                 Int             @id @default(autoincrement())
  name               String          // "First fitting", "Second fitting", "Pickup"
  defaultDurationMin Int             // 30, 45, 60, etc.
  color              String?         // Optional: hex color for calendar
  active             Boolean         @default(true)

  appointments       Appointment[]
}